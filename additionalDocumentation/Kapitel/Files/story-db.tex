\subsection{Allgemeines} Diese Datei enthält alle Funktionen zum Zugriff auf die Tabelle mit Geschichten.
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Einbindungspunkt} & inc-db.php \\ \hline
		\textbf{Einbindungspunkt} & inc-db-sub.php \\ \hline
	\end{tabular}
\end{table}
Die Datei ist nicht direkt durch den Nutzer aufrufbar, dies wird durch folgenden Code-Ausschnitt sichergestellt:
\begin{lstlisting}[language=php]
if (!defined('NICE_PROJECT')) {
	die('Permission denied.');
}
\end{lstlisting}
Der Globale Wert {\glqq NICE\_PROJECT\grqq} wird durch für den Nutzer valide Aufrufpunkte festgelegt, z.B. {\glqq api.php\grqq}.
\newpage
\subsection{Funktionen}
\subsubsection{insertStory}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$data & Array mit Daten \\ \hline
	\end{tabular}
\end{table}
\subparagraph{\$data}Das Array enthält folgende Elemente:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		uid   & Identifikator des hochladenden Nutzers \\ \hline
		hash  & SHA512 der Geschichte (Inhalt) \\ \hline
		title & Titel der Geschichte \\ \hline
		story & Inhalt der Geschichte \\ \hline
		aid   & numerischer Identifikator des hochladenden Moduls \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion fügt eine neue Geschichte hinzu. Die Funktion hat Auswirkungen auf folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
\end{itemize}
Die Antwort wird als strukturiertes Array an den Aufrufer zurückgegeben.
\subsubsection{getUserStory}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$token & alphanumerischer Identifikator einer Geschichte \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion ruft die Daten einer Geschichte anhand des alphanumerischen Identifikators ab. Die Funktion nutzt folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
	\item Tabelle mit Nutzerdaten
\end{itemize}
Die Antwort wird als strukturiertes Array an den Aufrufer zurückgegeben.
\subsubsection{getStoryIdByToken}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$token & alphanumerischer Identifikator einer Geschichte \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion ruft den numerischen Identifikator einer Geschichte anhand des alphanumerischen Identifikators ab. Die Funktion nutzt folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
\end{itemize}
Die Antwort wird als strukturiertes Array an den Aufrufer zurückgegeben.
\subsubsection{getStoriesByApp}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$aid & numerischer Identifikator eines Moduls \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion ruft alle Geschichten eines Moduls ab. Die Funktion nutzt folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
\end{itemize}
Die Antwort wird als strukturiertes Array an den Aufrufer zurückgegeben.
\subsubsection{updateStorieByToken}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$token & alphanumerischer Identifikator einer Geschichte \\ \hline
		\$title & Titel einer Geschichte \\ \hline
		\$story & Inhalt einer Geschichte \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion aktualisiert eine bestehende Geschichte. Die Funktion hat Auswirkungen auf folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
\end{itemize}
Die Antwort wird als strukturiertes Array an den Aufrufer zurückgegeben.
\subsubsection{getModuleTokenByStoryToken}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$token & alphanumerischer Identifikator einer Geschichte \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion ruft den numerischen Identifikator des hochladenden Moduls einer Geschichte ab. Die Funktion nutzt folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
\end{itemize}
Die Antwort wird als Zeichenkette an den Aufrufer zurückgegeben.
\subsubsection{getStoryIdByStoryToken}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$token & alphanumerischer Identifikator einer Geschichte \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion ruft den numerischen Identifikator der einer Geschichte anhand des alphanumerischen Identifikators ab. Die Funktion nutzt folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
\end{itemize}
Die Antwort wird als Zeichenkette an den Aufrufer zurückgegeben.
\subsubsection{getCreatorByStoryToken}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$token & alphanumerischer Identifikator einer Geschichte \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion ruft den Ersteller der einer Geschichte anhand des alphanumerischen Identifikators ab. Die Funktion nutzt folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
	\item Tabelle mit Nutzerdaten
\end{itemize}
Die Antwort wird als Zeichenkette an den Aufrufer zurückgegeben.
\subsubsection{deleteStory}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$sid & numerischer Identifikator einer Geschichte \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion löscht eine Geschichte aus der Datenbank. Die Funktion hat Auswirkungen auf folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
\end{itemize}
Die Antwort wird als strukturiertes Array an den Aufrufer zurückgegeben.
\subsubsection{changeStoryApproval}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$token & alphanumerischer Identifikator einer Geschichte \\ \hline
		\$value & Freischaltungstatus ({\glqq 1\grqq}: Freigeschaltet, {\glqq 0\grqq}: Gesperrt) \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion setzt den Status der Freischaltung einer Geschichte. Die Funktion hat Auswirkungen auf folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
\end{itemize}
Die Antwort wird als strukturiertes Array an den Aufrufer zurückgegeben.
\subsubsection{getStoryApprovalByStoryToken}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$token & alphanumerischer Identifikator einer Geschichte \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion ruft den Status der Freischaltung einer Geschichte anhand ihres alphanumerischen Identifikators ab. Die Funktion nutzt folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
\end{itemize}
Die Antwort wird als strukturiertes Array an den Aufrufer zurückgegeben.
\subsubsection{updateDeletionStateStoryByToken}
\paragraph{Parameter} Die Funktion besitzt folgende Parameter:
\begin{table}[H]
	\begin{tabular}{|c|p{11cm}|}
		\hline
		\textbf{Parametername} & \textbf{Parameterbeschreibung} \\ \hline
		\$token & alphanumerischer Identifikator einer Geschichte \\ \hline
		\$value & Status der Löschung ({\glqq 1\grqq}: Gelöscht, {\glqq 0\grqq}: Ungelöscht) \\ \hline
	\end{tabular}
\end{table}
\paragraph{Beschreibung} Die Funktion markiert eine Geschichte als gelöscht oder ungelöscht. Die Funktion hat Auswirkungen auf folgende Quellen:
\begin{itemize}
	\item Tabelle mit Geschichten
\end{itemize}
Die Antwort wird als strukturiertes Array an den Aufrufer zurückgegeben.
